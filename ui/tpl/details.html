
<div id="detailscontrol">
    <button type="button" class="btn btn-danger" id="details_btn_stop" onclick="stopDetailsRepo()">Stop</button>
    <button type="button" class="btn btn-success" id="details_btn_start" onclick="startDetailsRepo()">Start</button>
    <button type="button" class="btn btn-warning">Midd</button>
</div>

<div class="card text-bg-dark mb-3" style="margin-top:120px">
    <div class="card-header" id="repo_headline"></div>
    <div class="card-body">
        <div class="container">

            <div class="row">
                <div class="col ">Ident</div>
                <div class="col" id="repo_ident"></div>
            </div>
        
            <div class="row">
                <div class="col ">Name</div>
                <div class="col" id="repo_name"></div>
            </div>
        
            <div class="row">
                <div class="col ">Version</div>
                <div class="col" id="repo_version"></div>
            </div>
        
            <div class="row">
                <div class="col ">Author</div>
                <div class="col" id="repo_author"></div>
            </div>
        
            <div class="row">
                <div class="col ">Website</div>
                <div class="col" id="repo_website"></div>
            </div>
        
            <div class="row">
                <div class="col ">Launcher</div>
                <div class="col" id="repo_launcher"></div>
            </div>
        
            <div class="row">
                <div class="col ">Path</div>
                <div class="col" id="repo_path"></div>
            </div>
        
            <div class="row">
                <div class="col ">Standalone</div>
                <div class="col" id="repo_standalone"></div>
            </div>
        
        </div>
    </div>
</div>

<div class="card text-bg-dark mb-3">
    <div class="card-header">Console</div>
    <div class="card-body">
        <div id="detailsconsole"></div>
    </div>
    <div class="card-footer">
        <div class="container">
            <div class="row">
                <div class="col">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="consoleAutoScroll" checked>
                        <label class="form-check-label" for="consoleAutoScroll">
                          Auto-Scroll
                        </label>
                    </div>
                </div>
                <div class="col text-end">
                    <button type="button" class="btn btn-warning" onclick="clearDetailsConsole()">Clear</button>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="card text-bg-dark mb-3">
    <div class="card-header">Command</div>
    <div class="card-body">

        <div class="input-group mb-3">
            <span class="input-group-text">$</span>
            <input type="text" class="form-control" aria-label="Amount (to the nearest dollar)">
            <span class="input-group-text">
                <button type="button" class="btn btn-warning">Midd</button>
            </span>
        </div>
    </div>
    <div class="card-footer" style="font-size: 12px;">
        Depending on the Standalone-Mode of the app, Commands are transmitted as event or IPC Call.
    </div>    
</div>



<script>
        function getRepoDetails() {
            api_request('getrepodetails', {'name': _active_repo}, function(response) {
                console.log(response)
                var repo = response.DATA;
                var app = response.DATA.config.app;
                var info = response.DATA.config.info;
                repo_headline
                $('#repo_headline').html(app.name)
                $('#repo_ident').html(app.ident)
                $('#repo_name').html(app.name)
                $('#repo_version').html(app.version)
                $('#repo_author').html(info.author)
                $('#repo_website').html(info.website)
                $('#repo_launcher').html(app.launcher)
                $('#repo_path').html(repo.path)
                $('#repo_standalone').html(app.standalone ? 'Yes' : 'No')
                setDetailsRunning(repo.running)
            }) 

            for (i in output[_active_repo]) {
                addDetailedConsole(output[_active_repo][i])
            }
        }

        function addDetailedConsole(message) {
            if ( $('#detailsconsole').length ) {
                $('#detailsconsole').append(message + '<br>')
                if($("#consoleAutoScroll").is(':checked')) {
                    $('#detailsconsole').scrollTop($('#detailsconsole')[0].scrollHeight);
                }
            }
        }

        function setDetailsRunning(status) {
            if (status) {
                $('#details_btn_stop').show();
                $('#details_btn_start').hide();
            } else {
                $('#details_btn_stop').hide();
                $('#details_btn_start').show();
            }
        }

        function startDetailsRepo() {
            api_request('execrepo', {'name': _active_repo}, function(response) {console.log(response)});
            return false;
        }

        function stopDetailsRepo() {
            api_request('stoprepo', {'name': _active_repo}, function(response) {console.log(response)});
            return false;
        }

        function clearDetailsConsole() {
            output[_active_repo] = [];
            $('#detailsconsole').html('');
        }

        getRepoDetails();

</script>